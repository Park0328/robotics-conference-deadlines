<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Robotics Conference Deadlines</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body{font-family:system-ui,sans-serif;margin:0;background:#f8f9fa;color:#212529}
    header{padding:2rem;text-align:center;background:#fff;border-bottom:1px solid #dee2e6}
    h1{margin:0 0 .5rem;font-size:2rem}
    main{max-width:800px;margin:2rem auto;padding:0 1rem}
    .conf-card{background:#fff;border-radius:8px;padding:1.5rem;margin-bottom:1rem;box-shadow:0 2px 8px rgba(0,0,0,.1)}
    .conf-card h2{margin:.5rem 0;font-size:1.3rem}
    .conf-card a{color:#0d6efd;text-decoration:none}
    .conf-card a:hover{text-decoration:underline}
    .deadline-date{font-size:1rem;color:#495057;margin:0.25rem 0;font-weight:500;line-height:1.4}
    .countdown{font-weight:600;color:#dc3545;font-size:1.1rem;margin:0.5rem 0}
    .passed{color:#6c757d}
    .info{margin-top:0.5rem;font-size:0.9rem;color:#6c757d}
    .location{margin-right:1rem}
    @media (max-width: 600px) {.location{display:block;margin-right:0;margin-bottom:0.25rem}}
  </style>
</head>
<body>
  <header>
    <h1>ü§ñ Robotics Conference Deadlines</h1>
    <p>Countdowns to top robotics conference deadlines</p>
  </header>
  <main>
    <div id="conferences"></div>
  </main>
  <script>
    async function init(){
      try {
        const res=await fetch("conferences.json");
        if(!res.ok) throw new Error(`HTTP ${res.status}`);
        const confs=await res.json();
        
        const container=document.getElementById("conferences");
        confs.sort((a,b)=>new Date(a.deadline)-new Date(b.deadline))
             .forEach(c=>{
          const deadlineDate = new Date(c.deadline);
          const formattedDate = deadlineDate.toLocaleDateString('en-US', { 
            year: 'numeric', month: 'short', day: 'numeric', 
            hour: '2-digit', minute: '2-digit', 
            timeZoneName: 'short' 
          });
          
          const card=document.createElement("div");
          card.className="conf-card";
          card.innerHTML=`
            <h2><a href="${c.link}" target="_blank">${c.name} (${c.acronym})</a></h2>
            <div class="deadline-date">
              ${formattedDate}<br>
              <small style="color:#6c757d">${c.timezone}</small>
            </div>
            <div class="countdown" data-deadline="${c.deadline}"></div>
            <div class="info">
              <span class="location">üìç ${c.location}</span>
            </div>
          `;
          container.appendChild(card);
        });
        startCountdown();
      } catch(e) {
        console.error("JSON Î°úÎìú Ïã§Ìå®:", e);
        document.getElementById("conferences").innerHTML = 
          "<p style='color:red;text-align:center'>‚ö†Ô∏è conferences.json Î°úÎìú Ïã§Ìå®<br>ÏΩòÏÜî(F12) ÌôïÏù∏</p>";
      }
    }
    
    function startCountdown(){
      function update(){
        document.querySelectorAll(".countdown").forEach(el=>{
          const deadline=new Date(el.dataset.deadline);
          const now=new Date();
          const diff=deadline-now;
          
          if(diff<=0){
            el.textContent="‚è∞ Deadline passed";
            el.className="countdown passed";
            return;
          }
          
          const days=Math.floor(diff/(1000*60*60*24));
          const hours=Math.floor((diff%(1000*60*60*24))/(1000*60*60));
          const mins=Math.floor((diff%(1000*60*60))/(1000*60));
          const secs=Math.floor((diff%(1000*60))/1000);
          
          el.textContent=`${days}d ${hours}h ${mins}m ${secs}s ‚è≥`;
        });
      }
      update();
      setInterval(update,1000);
    }
    
    init();
  </script>
</body>
</html>
