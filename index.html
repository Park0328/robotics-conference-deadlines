<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Robotics Conference Deadlines</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body{font-family:system-ui,sans-serif;margin:0;background:#f8f9fa;color:#212529;line-height:1.5}
    header{padding:2rem;text-align:center;background:#fff;border-bottom:1px solid #dee2e6}
    h1{margin:0 0 .5rem;font-size:2rem}
    .last-updated{font-size:.85rem;color:#6c757d;margin-top:.5rem}
    main{max-width:800px;margin:2rem auto;padding:0 1rem}
    .conf-card{background:#fff;border-radius:12px;padding:1.75rem;margin-bottom:1rem;box-shadow:0 4px 12px rgba(0,0,0,.08);transition:box-shadow .2s}
    .conf-card:hover{box-shadow:0 8px 24px rgba(0,0,0,.12)}
    .conf-card h2{margin:.5rem 0 0;font-size:1.3rem}
    .conf-card a{color:#0d6efd;text-decoration:none;font-weight:600}
    .conf-card a:hover{text-decoration:underline}
    .deadline-date{font-size:.95rem;color:#495057;margin:.5rem 0;font-weight:500}
    .countdown{font-weight:700;color:#dc3545;font-size:1.15rem;margin:.75rem 0;font-family:'Courier New',monospace}
    .passed{color:#6c757d;font-style:italic}
    .info{margin-top:.75rem;font-size:.9rem;color:#6c757d}
    .location{margin-right:1rem}
    #comments-section{margin-top:3rem;padding-top:2rem;border-top:1px solid #dee2e6}
    #comments-section h3{margin-bottom:1rem;color:#212529}
    @media (max-width: 600px) {.location{display:block;margin-right:0;margin-bottom:.25rem}}
    .utterances{max-width:100%!important}
  </style>
</head>
<body>
  <header>
    <h1>ğŸ¤– Robotics Conference Deadlines</h1>
    <p>Real-time countdowns to top robotics conference deadlines</p>
    <div class="last-updated" id="lastUpdated">Last updated: Loading...</div>
  </header>
  <main>
    <div id="conferences"></div>
    
    <!-- ğŸ’¬ ëŒ“ê¸€ ì„¹ì…˜ -->
    <section id="comments-section">
      <h3>ğŸ’¬ Got corrections or more deadlines?</h3>
      <div id="utterances-container"></div>
    </section>
  </main>

  <script>
    async function init(){
      try {
        const res=await fetch("conferences.json");
        if(!res.ok) throw new Error(`HTTP ${res.status}`);
        const confs=await res.json();
        
        const container=document.getElementById("conferences");
        confs.sort((a,b)=>new Date(a.deadline)-new Date(b.deadline))
             .forEach(c=>{
          const deadlineDate = new Date(c.deadline);
          const formattedDate = deadlineDate.toLocaleString('en-US', { 
            year: 'numeric', month: 'short', day: 'numeric', 
            hour: '2-digit', minute: '2-digit', 
            hour12: false,
            timeZone: 'UTC'
          }).replace(' GMT', ' UTC');
          
          const card=document.createElement("div");
          card.className="conf-card";
          card.innerHTML=`
            <h2><a href="${c.link}" target="_blank">${c.name} (${c.acronym})</a></h2>
            <div class="deadline-date">${formattedDate} â€¢ ${c.timezone}</div>
            <div class="countdown" data-deadline="${c.deadline}">Loading...</div>
            <div class="info">
              <span class="location">ğŸ“ ${c.location}</span>
            </div>
          `;
          container.appendChild(card);
        });
        startCountdown();
        
        // ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì‹œê°„
        const now = new Date();
        document.getElementById('lastUpdated').textContent = 
          `ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: ${now.toLocaleString('ko-KR', { 
            year: 'numeric', month: 'long', day: 'numeric',
            hour: '2-digit', minute: '2-digit', hour12: false,
            timeZone: 'Asia/Seoul'
          })} (KST)`;
          
      } catch(e) {
        console.error("JSON ë¡œë“œ ì‹¤íŒ¨:", e);
        document.getElementById("conferences").innerHTML = 
          "<div style='text-align:center;padding:2rem;color:#dc3545'><strong>âš ï¸ conferences.json ë¡œë“œ ì‹¤íŒ¨</strong><br>F12 ì½˜ì†” í™•ì¸í•˜ì„¸ìš”</div>";
      }
    }
    
    function startCountdown(){
      function update(){
        document.querySelectorAll(".countdown").forEach(el=>{
          const deadline=new Date(el.dataset.deadline);
          const now=new Date();
          const diff=deadline-now;
          
          if(diff<=0){
            el.textContent="â° Deadline passed";
            el.className="countdown passed";
            return;
          }
          
          const days=Math.floor(diff/(1000*60*60*24));
          const hours=Math.floor((diff%(1000*60*60*24))/(1000*60*60));
          const mins=Math.floor((diff%(1000*60*60))/(1000*60));
          const secs=Math.floor((diff%(1000*60))/1000);
          
          el.textContent=`${days}d ${hours}h ${mins}m ${secs}s â³`;
        });
      }
      update();
      setInterval(update,1000);
    }
    
    init();
  </script>

  <!-- ğŸ’¬ Utterances ëŒ“ê¸€ ì‹œìŠ¤í…œ -->
  <script src="https://utteranc.es/client.js"
          repo="Park0328/robotics-conference-deadlines"
          issue-term="pathname"
          theme="github-light"
          crossorigin="anonymous"
          async>
  </script>
</body>
</html>
